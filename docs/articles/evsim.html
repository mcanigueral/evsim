<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="evsim">
<title>Introduction to {evsim} • evsim</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to {evsim}">
<meta property="og:description" content="evsim">
<meta property="og:image" content="mcanigueral.github.io/evsim/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-J2NB3LGNZN"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-J2NB3LGNZN');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">evsim</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/evsim.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/time_resolution.html">Time resolution</a>
    <a class="dropdown-item" href="../articles/multi_processing.html">Multi-core processing</a>
    <a class="dropdown-item" href="../articles/custom_evmodel.html">Custom evmodel</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/mcanigueral/evsim/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="evsim_files/htmlwidgets-1.6.2/htmlwidgets.js"></script><link href="evsim_files/dygraphs-1.1.1/dygraph.css" rel="stylesheet">
<script src="evsim_files/dygraphs-1.1.1/dygraph-combined.js"></script><script src="evsim_files/dygraphs-1.1.1/shapes.js"></script><script src="evsim_files/moment-2.8.4/moment.js"></script><script src="evsim_files/moment-timezone-0.2.5/moment-timezone-with-data.js"></script><script src="evsim_files/moment-fquarter-1.0.0/moment-fquarter.min.js"></script><script src="evsim_files/dygraphs-binding-1.1.1.6/dygraphs.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Introduction to {evsim}</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mcanigueral/evsim/blob/HEAD/vignettes/evsim.Rmd" class="external-link"><code>vignettes/evsim.Rmd</code></a></small>
      <div class="d-none name"><code>evsim.Rmd</code></div>
    </div>

    
    
<p>This package provides the tools to simulate new EV charging session,
on the basis of the <strong>Gaussian Mixture Models (GMM)</strong> of
different EV user profiles found and modeled with <a href="https://mcanigueral.github.io/evprof/" class="external-link"><code>{evprof}</code></a>.
The EV model obtained with <a href="https://mcanigueral.github.io/evprof/reference/get_ev_model.html" class="external-link"><code>evprof::get_ev_model</code></a>
function is an object of class <code>evmodel</code>, which contains
multiple time-cycle models (e.g. Weekdays and Weekends). At the same
time, each time-cycle model consists in a combination of multiple EV
user profiles and each user profile consists in multiple GMM. For more
information about the EV models read <a href="https://mcanigueral.github.io/evprof/articles/evmodel.html" class="external-link">this
article</a> from website of <a href="https://github.com/mcanigueral/evprof/" class="external-link">evprof</a> package.</p>
<div class="section level2">
<h2 id="required-data">Required data<a class="anchor" aria-label="anchor" href="#required-data"></a>
</h2>
<p>The only function of <a href="https://mcanigueral.github.io/evsim/">evsim</a> package necessary to
simulate new EV sessions is function <code>simulate_sessions</code>,
which returns a tibble of EV charging sessions. The required input
arguments to run this function are:</p>
<ul>
<li>The EV model (object of class <code>evmodel</code>)</li>
<li>Number of daily sessions for each time-cycle model</li>
<li>User profiles distribution (ratio of every user profile) and
specific charging power (if required)</li>
<li>Charging power distribution (ratio of every different charging
rate)</li>
<li>Dates to simulate</li>
</ul>
<div class="section level3">
<h3 id="ev-model">EV model<a class="anchor" aria-label="anchor" href="#ev-model"></a>
</h3>
<p>Package <a href="https://mcanigueral.github.io/evsim/">evsim</a> provides an EV model of example, being
the model created from California ACN data in the <a href="https://mcanigueral.github.io/evprof/articles/california.html" class="external-link">California
article</a> from <a href="https://github.com/mcanigueral/evprof/" class="external-link">evprof</a> documentation. This model can be
accessed loading the <a href="https://mcanigueral.github.io/evsim/">evsim</a> package or with the following
function:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ev_model</span> <span class="op">&lt;-</span> <span class="fu">evsim</span><span class="fu">::</span><span class="va"><a href="../reference/california_ev_model.html">california_ev_model</a></span></span></code></pre></div>
<p>Let’s take a look to the information that the <code>print</code>
function shows for an <code>evmodel</code> object:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">ev_model</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## EV sessions model of class "evmodel", created on 2024-01-29 </span></span>
<span><span class="co">## Timezone of the model: America/Los_Angeles </span></span>
<span><span class="co">## The Gaussian Mixture Models of EV user profiles are built in:</span></span>
<span><span class="co">##   - Connection Models: logarithmic scale</span></span>
<span><span class="co">##   - Energy Models: logarithmic scale</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Model composed by 2 time-cycles:</span></span>
<span><span class="co">##   1. Workday:</span></span>
<span><span class="co">##      Months = 1-12, Week days = 1-2</span></span>
<span><span class="co">##      User profiles = Visit, Worktime</span></span>
<span><span class="co">##   2. Weekend:</span></span>
<span><span class="co">##      Months = 1-12, Week days = 6-7</span></span>
<span><span class="co">##      User profiles = Visit</span></span></code></pre>
<p>We have 2 different time-cycles in this case (Workdays and Weekends),
and each one has its corresponding user profiles. At the same time, each
user profile of each time-cycle is modeled by two different models:</p>
<ul>
<li>Connection Models: combination of multiple Gaussian distributions of
two variables (Connection Start Time and Connection Duration)</li>
<li>Energy Models: combination of multiple Gaussian distributions of one
variable (Energy)</li>
</ul>
<p>Moreover, each User profile has a corresponding ratio over the total
number of daily sessions. In this case, for the <strong>Workday</strong>
time-cycle the half of charging sessions are <strong>Vist</strong> users
and the other half <strong>Worktime</strong> users, while for the
<strong>Weekend</strong> time-cycle all sessions are
<strong>Visit</strong> users.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">workday_models</span> <span class="op">&lt;-</span> <span class="va">ev_model</span><span class="op">$</span><span class="va">models</span><span class="op">$</span><span class="va">user_profiles</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="va">workday_models</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 2 × 4</span></span></span>
<span><span class="co">##   profile  ratio connection_models energy_models   </span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>          </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> Visit    0.460 <span style="color: #949494;">&lt;tibble [3 × 3]&gt;</span>  <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> Worktime 0.540 <span style="color: #949494;">&lt;tibble [3 × 3]&gt;</span>  <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span></span></span></code></pre>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weekend_models</span> <span class="op">&lt;-</span> <span class="va">ev_model</span><span class="op">$</span><span class="va">models</span><span class="op">$</span><span class="va">user_profiles</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="va">weekend_models</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 1 × 4</span></span></span>
<span><span class="co">##   profile ratio connection_models energy_models   </span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>          </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> Visit       1 <span style="color: #949494;">&lt;tibble [2 × 3]&gt;</span>  <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span></span></span></code></pre>
</div>
<div class="section level3">
<h3 id="number-of-sessions-per-day">Number of sessions per day<a class="anchor" aria-label="anchor" href="#number-of-sessions-per-day"></a>
</h3>
<p>To set the number of sessions per day to function
<code><a href="../reference/simulate_sessions.html">simulate_sessions()</a></code> function we need to pass a tibble with
variables <code>time_cycle</code> (names corresponding to
<code>evmodel$models$time_cycle</code>) and <code>n_sessions</code>
(number of daily sessions per day for each time-cycle model). For
example:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sessions_day</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  time_cycle <span class="op">=</span> <span class="va">ev_model</span><span class="op">$</span><span class="va">models</span><span class="op">$</span><span class="va">time_cycle</span>,</span>
<span>  n_sessions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">150</span>, <span class="fl">50</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">sessions_day</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 2 × 2</span></span></span>
<span><span class="co">##   time_cycle n_sessions</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> Workday           150</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> Weekend            50</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="user-profiles-distribution">User profiles distribution<a class="anchor" aria-label="anchor" href="#user-profiles-distribution"></a>
</h3>
<p>In the “EV model” section we have seen that inside the
<code>ev_model</code> object there is already a default distribution of
user profiles, each one with the corresponding ratio. These ratio values
were obtained from the clustering process done by <a href="https://github.com/mcanigueral/evprof/" class="external-link">evprof</a>
package and represent the presence of every user profile over the total
number of sessions clustered.</p>
<p>However, we may want to simulate different scenarios or use cases
where these ratios differ from the current ones. For example, to
simulate the EV demand in an industrial area it could be interesting to
prioritize the presence of Worktime sessions over Visit sessions. This
can be done by setting a new user profiles’ distribution tibble, which
must contain the variables <code>time_cycle</code>, <code>profile</code>
and <code>ratio</code>.</p>
<p>The default values for these variables, included within the model,
can be obtained with the function
<code>get_user_profiles_distribution</code>. It is not mandatory that
all time-cycles and user profiles appear in the
<code>user_profiles</code> tibble. The rule is simple: only time cycles
and user profiles appearing in the <code>user_profiles</code> tibble
will be simulated.</p>
<p>Moreover, we can specify the <strong>charging power</strong> of a
concrete user profile. This is useful in some scenarios where there is a
type of vehicle (e.g. truck) that charges at different rate than the
rest of vehicles. This can be done with the column <code>power</code> in
the <code>user_profiles</code> tibble, setting the power values in kW.
All user profiles without a specific <code>power</code> value will be
simulated with a random charging power obtained according to the
charging power distribution (see next section).</p>
<p>For example, let’s say we want to simulate a <strong>Workday</strong>
distribution with 80% of sessions being Worktime and 20% of sessions
being Visit, and considering that all Worktime sessions charge with
three-phase AC vehicles with 16A connection (11 kW). Then our
<code>user_profiles</code> tibble should be the following one:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">user_profiles</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  time_cycle <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Workday'</span>, <span class="st">'Workday'</span>, <span class="st">'Weekend'</span><span class="op">)</span>,</span>
<span>  profile <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Visit'</span>, <span class="st">'Worktime'</span>, <span class="st">'Visit'</span><span class="op">)</span>,</span>
<span>  ratio <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.8</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  power <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">11</span>, <span class="cn">NA</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">user_profiles</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 3 × 4</span></span></span>
<span><span class="co">##   time_cycle profile  ratio power</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> Workday    Visit      0.2    <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> Workday    Worktime   0.8    11</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> Weekend    Visit      1      <span style="color: #BB0000;">NA</span></span></span></code></pre>
</div>
<div class="section level3">
<h3 id="charging-powers-distribution">Charging powers distribution<a class="anchor" aria-label="anchor" href="#charging-powers-distribution"></a>
</h3>
<p>The charging power is not a variable modeled by Gaussian Mixture
Models (GMM) like the connection variables or the energy. However, the
energy GMM can be built by charging power separately (see <a href="https://mcanigueral.github.io/evprof/articles/evprof.html#user-profiles-modeling" class="external-link">User
profiles modelling</a> on <a href="https://github.com/mcanigueral/evprof/" class="external-link">evprof</a> website), since in
general the energy charged depends on the charging power (the higher the
charging power the higher the energy demand).</p>
<p>The purpose of letting the charging power out of the GMM is that it
is a variable that depends on the EV model and the charging point, so it
may change between scenarios. For example, we may want to simulate a
scenario where all vehicles have a three-phase connection (11 kW)
instead of the current scenario with still a lot of vehicles charging
with a single phase (3.7 kW). Therefore, it was convenient to set an
option to simulate a specific distribution of charging powers for the
simulated EV fleet. This is done with a <code>charging_powers</code>
tibble with variables <code>power</code> and <code>ratio</code>. In the
public charging infrastructure the most common and standard power rates
are:</p>
<ul>
<li>3.7 kW AC (single-phase 16A)</li>
<li>7.3 kW AC (two-phase 16A)</li>
<li>11 kW AC (three-phase 16A)</li>
</ul>
<p>If the energy GMM were built according to the charging power, it is
recommended that the <code>power</code> values in the
<code>charging_powers</code> tibble match the original charging power
values. These can be found inside the models. For the example
<code>ev_model</code> at issue, we see that the Workday energy models of
the <code>Visit</code> user profile are not built by charging power
since the <code>charging_rate</code> column shows an
<code>Unknown</code> value:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">workday_models</span><span class="op">$</span><span class="va">energy_models</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="co"># Visit profile energy models</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 1 × 3</span></span></span>
<span><span class="co">##   charging_rate ratio energy_models   </span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>          </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> Unknown           1 <span style="color: #949494;">&lt;tibble [6 × 3]&gt;</span></span></span></code></pre>
<p>In this case, the same energy GMM will be used for all
<code>power</code> values. However, if we had energy models for 3.7 kW
and 11 kW separately, and we want to simulate 22 kW sessions, the models
used for the 22 kW sessions will be the 11 kW models since they are the
best approximate solution.</p>
<p>To follow the example, we can set the following charging power
distribution:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">charging_powers</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  power <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3.7</span>, <span class="fl">7.3</span>, <span class="fl">11</span><span class="op">)</span>,</span>
<span>  ratio <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.4</span>, <span class="fl">0.4</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">charging_powers</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 3 × 2</span></span></span>
<span><span class="co">##   power ratio</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>   3.7   0.2</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>   7.3   0.4</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>  11     0.4</span></span></code></pre>
<p>This complements the variable <code>power</code> from the
<code>user_profiles</code> tibble (see previous section). This
<code>charging_powers</code> tibble will be used to assign a charging
power to all user profiles’ sessions without a <code>power</code>
specified in <code>user_profiles</code>.</p>
</div>
<div class="section level3">
<h3 id="datetime-values">Datetime values<a class="anchor" aria-label="anchor" href="#datetime-values"></a>
</h3>
<p>The function <code><a href="../reference/simulate_sessions.html">simulate_sessions()</a></code> automatically selects
the time-cycle that fits to a specific date. This is why we have to pass
a vector of the dates that we want to simulate. For example:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dates_sim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.Date.html" class="external-link">seq.Date</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">'2019-09-10'</span><span class="op">)</span>, to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">'2019-09-15'</span><span class="op">)</span>, by <span class="op">=</span> <span class="st">'1 day'</span><span class="op">)</span></span>
<span><span class="va">dates_sim</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "2019-09-10" "2019-09-11" "2019-09-12" "2019-09-13" "2019-09-14"</span></span>
<span><span class="co">## [6] "2019-09-15"</span></span></code></pre>
<p>Another datetime argument that the simulation function needs is the
time resolution of the datetime variables of the sessions (connection
start, connection end, charging end, …). For this example we will set a
time resolution of 15 minutes, so the argument will be
<code>resolution = 15</code>.</p>
</div>
</div>
<div class="section level2">
<h2 id="simulation">Simulation<a class="anchor" aria-label="anchor" href="#simulation"></a>
</h2>
<p>We have now all required data and we are ready to simulate the new
sessions:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sessions_estimated</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/simulate_sessions.html">simulate_sessions</a></span><span class="op">(</span></span>
<span>  <span class="va">ev_model</span>,</span>
<span>  <span class="va">sessions_day</span>, </span>
<span>  <span class="va">user_profiles</span>,</span>
<span>  <span class="va">charging_powers</span>,</span>
<span>  <span class="va">dates_sim</span>,</span>
<span>  resolution <span class="op">=</span> <span class="fl">15</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">sessions_estimated</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 6 × 11</span></span></span>
<span><span class="co">##   Session Timecycle Profile  ConnectionStartDateTime ConnectionEndDateTime</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>               </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> S1      Workday   Visit    2019-09-10 <span style="color: #949494;">04:45:00</span>     2019-09-10 <span style="color: #949494;">15:39:00</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> S2      Workday   Worktime 2019-09-10 <span style="color: #949494;">04:45:00</span>     2019-09-10 <span style="color: #949494;">15:26:00</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> S3      Workday   Visit    2019-09-10 <span style="color: #949494;">05:00:00</span>     2019-09-10 <span style="color: #949494;">14:13:00</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span> S4      Workday   Worktime 2019-09-10 <span style="color: #949494;">05:00:00</span>     2019-09-10 <span style="color: #949494;">17:58:00</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span> S5      Workday   Worktime 2019-09-10 <span style="color: #949494;">05:30:00</span>     2019-09-10 <span style="color: #949494;">14:33:00</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">6</span> S6      Workday   Worktime 2019-09-10 <span style="color: #949494;">05:30:00</span>     2019-09-10 <span style="color: #949494;">16:30:00</span>  </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 6 more variables: ChargingStartDateTime &lt;dttm&gt;, ChargingEndDateTime &lt;dttm&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   Power &lt;dbl&gt;, Energy &lt;dbl&gt;, ConnectionHours &lt;dbl&gt;, ChargingHours &lt;dbl&gt;</span></span></span></code></pre>
<p>We have obtained a total of 700 sessions for our 7 simulation dates
(i.e. 100 sessions/day), each session corresponding to a specific
charging profile. We can notice that the datetime variables have a
resolution of 15 minutes according to our configuration, and the energy
required corresponds to product of <code>Power</code> and
<code>ChargingHours</code>.</p>
<p>We can check that the number of sessions of each power rate
corresponds to our configuration:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sessions_estimated</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">Profile</span>, <span class="va">Power</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>pct <span class="op">=</span> <span class="va">n</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 4 × 4</span></span></span>
<span><span class="co">## <span style="color: #949494;"># Groups:   Profile [2]</span></span></span>
<span><span class="co">##   Profile  Power     n   pct</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> Visit      3.7    44    20</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> Visit      7.3    88    40</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> Visit     11      88    40</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span> Worktime  11     480   100</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="ev-demand">EV demand<a class="anchor" aria-label="anchor" href="#ev-demand"></a>
</h2>
<p>Finally, we can calculate the estimated demand with function
<code><a href="../reference/get_demand.html">get_demand()</a></code>. This function accepts an optional argument,
<code>dttm_seq</code>, which will be the datetime sequence of the
time-series demand data frame returned by the function. We will set the
datetime sequence from our first to last date with a <strong>resolution
of 15 minutes</strong> and the timezone of the original model (using the
<code><a href="https://lubridate.tidyverse.org/reference/with_tz.html" class="external-link">lubridate::with_tz()</a></code> function):</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dttm_seq</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.POSIXt.html" class="external-link">seq.POSIXt</a></span><span class="op">(</span></span>
<span>  from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="st">'2019-09-10'</span><span class="op">)</span>, </span>
<span>  to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="st">'2019-09-16'</span><span class="op">)</span>, </span>
<span>  by <span class="op">=</span> <span class="st">'15 min'</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/with_tz.html" class="external-link">with_tz</a></span><span class="op">(</span></span>
<span>    <span class="va">ev_model</span><span class="op">$</span><span class="va">metadata</span><span class="op">$</span><span class="va">tzone</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">estimated_demand</span> <span class="op">&lt;-</span> <span class="va">sessions_estimated</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/get_demand.html">get_demand</a></span><span class="op">(</span><span class="va">dttm_seq</span><span class="op">)</span></span></code></pre></div>
<p>And the plot of the estimated demand (making use of <a href="https://rstudio.github.io/dygraphs/" class="external-link"><code>{dygraphs}</code></a>
package through my custom package <a href="https://github.com/mcanigueral/dutils/" class="external-link"><code>{dutils}</code></a>):</p>
<div class="dygraphs html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-b2e15e50e3857400a18a" style="width:864px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-b2e15e50e3857400a18a">{"x":{"attrs":{"ylabel":"Power demand (kW)","labels":["minute","Visit","Worktime"],"axes":{"x":{"pixelsPerLabel":60,"drawAxis":true},"y":{"drawAxis":true}},"legend":"always","labelsDivWidth":250,"labelsShowZeroValues":true,"labelsSeparateLines":false,"hideOverlayOnMouseOut":true,"stackedGraph":true,"fillGraph":true,"fillAlpha":0.15,"stepPlot":false,"drawPoints":false,"pointSize":1,"drawGapEdgePoints":false,"connectSeparatedPoints":false,"strokeWidth":1,"strokeBorderColor":"white","colorValue":0.5,"colorSaturation":1,"includeZero":false,"drawAxesAtZero":false,"logscale":false,"axisTickSize":3,"axisLineColor":"black","axisLineWidth":0.3,"axisLabelColor":"black","axisLabelFontSize":14,"axisLabelWidth":60,"drawGrid":true,"gridLineWidth":0.3,"rightGap":5,"digitsAfterDecimal":2,"labelsKMB":false,"labelsKMG2":false,"labelsUTC":false,"maxNumberWidth":6,"animatedZooms":false,"mobileDisableYTouch":true,"retainDateWindow":true,"disableZoom":false},"scale":"minute","annotations":[],"shadings":[],"events":[],"format":"date","data":[["2019-09-09T22:00:00.000Z","2019-09-09T22:15:00.000Z","2019-09-09T22:30:00.000Z","2019-09-09T22:45:00.000Z","2019-09-09T23:00:00.000Z","2019-09-09T23:15:00.000Z","2019-09-09T23:30:00.000Z","2019-09-09T23:45:00.000Z","2019-09-10T00:00:00.000Z","2019-09-10T00:15:00.000Z","2019-09-10T00:30:00.000Z","2019-09-10T00:45:00.000Z","2019-09-10T01:00:00.000Z","2019-09-10T01:15:00.000Z","2019-09-10T01:30:00.000Z","2019-09-10T01:45:00.000Z","2019-09-10T02:00:00.000Z","2019-09-10T02:15:00.000Z","2019-09-10T02:30:00.000Z","2019-09-10T02:45:00.000Z","2019-09-10T03:00:00.000Z","2019-09-10T03:15:00.000Z","2019-09-10T03:30:00.000Z","2019-09-10T03:45:00.000Z","2019-09-10T04:00:00.000Z","2019-09-10T04:15:00.000Z","2019-09-10T04:30:00.000Z","2019-09-10T04:45:00.000Z","2019-09-10T05:00:00.000Z","2019-09-10T05:15:00.000Z","2019-09-10T05:30:00.000Z","2019-09-10T05:45:00.000Z","2019-09-10T06:00:00.000Z","2019-09-10T06:15:00.000Z","2019-09-10T06:30:00.000Z","2019-09-10T06:45:00.000Z","2019-09-10T07:00:00.000Z","2019-09-10T07:15:00.000Z","2019-09-10T07:30:00.000Z","2019-09-10T07:45:00.000Z","2019-09-10T08:00:00.000Z","2019-09-10T08:15:00.000Z","2019-09-10T08:30:00.000Z","2019-09-10T08:45:00.000Z","2019-09-10T09:00:00.000Z","2019-09-10T09:15:00.000Z","2019-09-10T09:30:00.000Z","2019-09-10T09:45:00.000Z","2019-09-10T10:00:00.000Z","2019-09-10T10:15:00.000Z","2019-09-10T10:30:00.000Z","2019-09-10T10:45:00.000Z","2019-09-10T11:00:00.000Z","2019-09-10T11:15:00.000Z","2019-09-10T11:30:00.000Z","2019-09-10T11:45:00.000Z","2019-09-10T12:00:00.000Z","2019-09-10T12:15:00.000Z","2019-09-10T12:30:00.000Z","2019-09-10T12:45:00.000Z","2019-09-10T13:00:00.000Z","2019-09-10T13:15:00.000Z","2019-09-10T13:30:00.000Z","2019-09-10T13:45:00.000Z","2019-09-10T14:00:00.000Z","2019-09-10T14:15:00.000Z","2019-09-10T14:30:00.000Z","2019-09-10T14:45:00.000Z","2019-09-10T15:00:00.000Z","2019-09-10T15:15:00.000Z","2019-09-10T15:30:00.000Z","2019-09-10T15:45:00.000Z","2019-09-10T16:00:00.000Z","2019-09-10T16:15:00.000Z","2019-09-10T16:30:00.000Z","2019-09-10T16:45:00.000Z","2019-09-10T17:00:00.000Z","2019-09-10T17:15:00.000Z","2019-09-10T17:30:00.000Z","2019-09-10T17:45:00.000Z","2019-09-10T18:00:00.000Z","2019-09-10T18:15:00.000Z","2019-09-10T18:30:00.000Z","2019-09-10T18:45:00.000Z","2019-09-10T19:00:00.000Z","2019-09-10T19:15:00.000Z","2019-09-10T19:30:00.000Z","2019-09-10T19:45:00.000Z","2019-09-10T20:00:00.000Z","2019-09-10T20:15:00.000Z","2019-09-10T20:30:00.000Z","2019-09-10T20:45:00.000Z","2019-09-10T21:00:00.000Z","2019-09-10T21:15:00.000Z","2019-09-10T21:30:00.000Z","2019-09-10T21:45:00.000Z","2019-09-10T22:00:00.000Z","2019-09-10T22:15:00.000Z","2019-09-10T22:30:00.000Z","2019-09-10T22:45:00.000Z","2019-09-10T23:00:00.000Z","2019-09-10T23:15:00.000Z","2019-09-10T23:30:00.000Z","2019-09-10T23:45:00.000Z","2019-09-11T00:00:00.000Z","2019-09-11T00:15:00.000Z","2019-09-11T00:30:00.000Z","2019-09-11T00:45:00.000Z","2019-09-11T01:00:00.000Z","2019-09-11T01:15:00.000Z","2019-09-11T01:30:00.000Z","2019-09-11T01:45:00.000Z","2019-09-11T02:00:00.000Z","2019-09-11T02:15:00.000Z","2019-09-11T02:30:00.000Z","2019-09-11T02:45:00.000Z","2019-09-11T03:00:00.000Z","2019-09-11T03:15:00.000Z","2019-09-11T03:30:00.000Z","2019-09-11T03:45:00.000Z","2019-09-11T04:00:00.000Z","2019-09-11T04:15:00.000Z","2019-09-11T04:30:00.000Z","2019-09-11T04:45:00.000Z","2019-09-11T05:00:00.000Z","2019-09-11T05:15:00.000Z","2019-09-11T05:30:00.000Z","2019-09-11T05:45:00.000Z","2019-09-11T06:00:00.000Z","2019-09-11T06:15:00.000Z","2019-09-11T06:30:00.000Z","2019-09-11T06:45:00.000Z","2019-09-11T07:00:00.000Z","2019-09-11T07:15:00.000Z","2019-09-11T07:30:00.000Z","2019-09-11T07:45:00.000Z","2019-09-11T08:00:00.000Z","2019-09-11T08:15:00.000Z","2019-09-11T08:30:00.000Z","2019-09-11T08:45:00.000Z","2019-09-11T09:00:00.000Z","2019-09-11T09:15:00.000Z","2019-09-11T09:30:00.000Z","2019-09-11T09:45:00.000Z","2019-09-11T10:00:00.000Z","2019-09-11T10:15:00.000Z","2019-09-11T10:30:00.000Z","2019-09-11T10:45:00.000Z","2019-09-11T11:00:00.000Z","2019-09-11T11:15:00.000Z","2019-09-11T11:30:00.000Z","2019-09-11T11:45:00.000Z","2019-09-11T12:00:00.000Z","2019-09-11T12:15:00.000Z","2019-09-11T12:30:00.000Z","2019-09-11T12:45:00.000Z","2019-09-11T13:00:00.000Z","2019-09-11T13:15:00.000Z","2019-09-11T13:30:00.000Z","2019-09-11T13:45:00.000Z","2019-09-11T14:00:00.000Z","2019-09-11T14:15:00.000Z","2019-09-11T14:30:00.000Z","2019-09-11T14:45:00.000Z","2019-09-11T15:00:00.000Z","2019-09-11T15:15:00.000Z","2019-09-11T15:30:00.000Z","2019-09-11T15:45:00.000Z","2019-09-11T16:00:00.000Z","2019-09-11T16:15:00.000Z","2019-09-11T16:30:00.000Z","2019-09-11T16:45:00.000Z","2019-09-11T17:00:00.000Z","2019-09-11T17:15:00.000Z","2019-09-11T17:30:00.000Z","2019-09-11T17:45:00.000Z","2019-09-11T18:00:00.000Z","2019-09-11T18:15:00.000Z","2019-09-11T18:30:00.000Z","2019-09-11T18:45:00.000Z","2019-09-11T19:00:00.000Z","2019-09-11T19:15:00.000Z","2019-09-11T19:30:00.000Z","2019-09-11T19:45:00.000Z","2019-09-11T20:00:00.000Z","2019-09-11T20:15:00.000Z","2019-09-11T20:30:00.000Z","2019-09-11T20:45:00.000Z","2019-09-11T21:00:00.000Z","2019-09-11T21:15:00.000Z","2019-09-11T21:30:00.000Z","2019-09-11T21:45:00.000Z","2019-09-11T22:00:00.000Z","2019-09-11T22:15:00.000Z","2019-09-11T22:30:00.000Z","2019-09-11T22:45:00.000Z","2019-09-11T23:00:00.000Z","2019-09-11T23:15:00.000Z","2019-09-11T23:30:00.000Z","2019-09-11T23:45:00.000Z","2019-09-12T00:00:00.000Z","2019-09-12T00:15:00.000Z","2019-09-12T00:30:00.000Z","2019-09-12T00:45:00.000Z","2019-09-12T01:00:00.000Z","2019-09-12T01:15:00.000Z","2019-09-12T01:30:00.000Z","2019-09-12T01:45:00.000Z","2019-09-12T02:00:00.000Z","2019-09-12T02:15:00.000Z","2019-09-12T02:30:00.000Z","2019-09-12T02:45:00.000Z","2019-09-12T03:00:00.000Z","2019-09-12T03:15:00.000Z","2019-09-12T03:30:00.000Z","2019-09-12T03:45:00.000Z","2019-09-12T04:00:00.000Z","2019-09-12T04:15:00.000Z","2019-09-12T04:30:00.000Z","2019-09-12T04:45:00.000Z","2019-09-12T05:00:00.000Z","2019-09-12T05:15:00.000Z","2019-09-12T05:30:00.000Z","2019-09-12T05:45:00.000Z","2019-09-12T06:00:00.000Z","2019-09-12T06:15:00.000Z","2019-09-12T06:30:00.000Z","2019-09-12T06:45:00.000Z","2019-09-12T07:00:00.000Z","2019-09-12T07:15:00.000Z","2019-09-12T07:30:00.000Z","2019-09-12T07:45:00.000Z","2019-09-12T08:00:00.000Z","2019-09-12T08:15:00.000Z","2019-09-12T08:30:00.000Z","2019-09-12T08:45:00.000Z","2019-09-12T09:00:00.000Z","2019-09-12T09:15:00.000Z","2019-09-12T09:30:00.000Z","2019-09-12T09:45:00.000Z","2019-09-12T10:00:00.000Z","2019-09-12T10:15:00.000Z","2019-09-12T10:30:00.000Z","2019-09-12T10:45:00.000Z","2019-09-12T11:00:00.000Z","2019-09-12T11:15:00.000Z","2019-09-12T11:30:00.000Z","2019-09-12T11:45:00.000Z","2019-09-12T12:00:00.000Z","2019-09-12T12:15:00.000Z","2019-09-12T12:30:00.000Z","2019-09-12T12:45:00.000Z","2019-09-12T13:00:00.000Z","2019-09-12T13:15:00.000Z","2019-09-12T13:30:00.000Z","2019-09-12T13:45:00.000Z","2019-09-12T14:00:00.000Z","2019-09-12T14:15:00.000Z","2019-09-12T14:30:00.000Z","2019-09-12T14:45:00.000Z","2019-09-12T15:00:00.000Z","2019-09-12T15:15:00.000Z","2019-09-12T15:30:00.000Z","2019-09-12T15:45:00.000Z","2019-09-12T16:00:00.000Z","2019-09-12T16:15:00.000Z","2019-09-12T16:30:00.000Z","2019-09-12T16:45:00.000Z","2019-09-12T17:00:00.000Z","2019-09-12T17:15:00.000Z","2019-09-12T17:30:00.000Z","2019-09-12T17:45:00.000Z","2019-09-12T18:00:00.000Z","2019-09-12T18:15:00.000Z","2019-09-12T18:30:00.000Z","2019-09-12T18:45:00.000Z","2019-09-12T19:00:00.000Z","2019-09-12T19:15:00.000Z","2019-09-12T19:30:00.000Z","2019-09-12T19:45:00.000Z","2019-09-12T20:00:00.000Z","2019-09-12T20:15:00.000Z","2019-09-12T20:30:00.000Z","2019-09-12T20:45:00.000Z","2019-09-12T21:00:00.000Z","2019-09-12T21:15:00.000Z","2019-09-12T21:30:00.000Z","2019-09-12T21:45:00.000Z","2019-09-12T22:00:00.000Z","2019-09-12T22:15:00.000Z","2019-09-12T22:30:00.000Z","2019-09-12T22:45:00.000Z","2019-09-12T23:00:00.000Z","2019-09-12T23:15:00.000Z","2019-09-12T23:30:00.000Z","2019-09-12T23:45:00.000Z","2019-09-13T00:00:00.000Z","2019-09-13T00:15:00.000Z","2019-09-13T00:30:00.000Z","2019-09-13T00:45:00.000Z","2019-09-13T01:00:00.000Z","2019-09-13T01:15:00.000Z","2019-09-13T01:30:00.000Z","2019-09-13T01:45:00.000Z","2019-09-13T02:00:00.000Z","2019-09-13T02:15:00.000Z","2019-09-13T02:30:00.000Z","2019-09-13T02:45:00.000Z","2019-09-13T03:00:00.000Z","2019-09-13T03:15:00.000Z","2019-09-13T03:30:00.000Z","2019-09-13T03:45:00.000Z","2019-09-13T04:00:00.000Z","2019-09-13T04:15:00.000Z","2019-09-13T04:30:00.000Z","2019-09-13T04:45:00.000Z","2019-09-13T05:00:00.000Z","2019-09-13T05:15:00.000Z","2019-09-13T05:30:00.000Z","2019-09-13T05:45:00.000Z","2019-09-13T06:00:00.000Z","2019-09-13T06:15:00.000Z","2019-09-13T06:30:00.000Z","2019-09-13T06:45:00.000Z","2019-09-13T07:00:00.000Z","2019-09-13T07:15:00.000Z","2019-09-13T07:30:00.000Z","2019-09-13T07:45:00.000Z","2019-09-13T08:00:00.000Z","2019-09-13T08:15:00.000Z","2019-09-13T08:30:00.000Z","2019-09-13T08:45:00.000Z","2019-09-13T09:00:00.000Z","2019-09-13T09:15:00.000Z","2019-09-13T09:30:00.000Z","2019-09-13T09:45:00.000Z","2019-09-13T10:00:00.000Z","2019-09-13T10:15:00.000Z","2019-09-13T10:30:00.000Z","2019-09-13T10:45:00.000Z","2019-09-13T11:00:00.000Z","2019-09-13T11:15:00.000Z","2019-09-13T11:30:00.000Z","2019-09-13T11:45:00.000Z","2019-09-13T12:00:00.000Z","2019-09-13T12:15:00.000Z","2019-09-13T12:30:00.000Z","2019-09-13T12:45:00.000Z","2019-09-13T13:00:00.000Z","2019-09-13T13:15:00.000Z","2019-09-13T13:30:00.000Z","2019-09-13T13:45:00.000Z","2019-09-13T14:00:00.000Z","2019-09-13T14:15:00.000Z","2019-09-13T14:30:00.000Z","2019-09-13T14:45:00.000Z","2019-09-13T15:00:00.000Z","2019-09-13T15:15:00.000Z","2019-09-13T15:30:00.000Z","2019-09-13T15:45:00.000Z","2019-09-13T16:00:00.000Z","2019-09-13T16:15:00.000Z","2019-09-13T16:30:00.000Z","2019-09-13T16:45:00.000Z","2019-09-13T17:00:00.000Z","2019-09-13T17:15:00.000Z","2019-09-13T17:30:00.000Z","2019-09-13T17:45:00.000Z","2019-09-13T18:00:00.000Z","2019-09-13T18:15:00.000Z","2019-09-13T18:30:00.000Z","2019-09-13T18:45:00.000Z","2019-09-13T19:00:00.000Z","2019-09-13T19:15:00.000Z","2019-09-13T19:30:00.000Z","2019-09-13T19:45:00.000Z","2019-09-13T20:00:00.000Z","2019-09-13T20:15:00.000Z","2019-09-13T20:30:00.000Z","2019-09-13T20:45:00.000Z","2019-09-13T21:00:00.000Z","2019-09-13T21:15:00.000Z","2019-09-13T21:30:00.000Z","2019-09-13T21:45:00.000Z","2019-09-13T22:00:00.000Z","2019-09-13T22:15:00.000Z","2019-09-13T22:30:00.000Z","2019-09-13T22:45:00.000Z","2019-09-13T23:00:00.000Z","2019-09-13T23:15:00.000Z","2019-09-13T23:30:00.000Z","2019-09-13T23:45:00.000Z","2019-09-14T00:00:00.000Z","2019-09-14T00:15:00.000Z","2019-09-14T00:30:00.000Z","2019-09-14T00:45:00.000Z","2019-09-14T01:00:00.000Z","2019-09-14T01:15:00.000Z","2019-09-14T01:30:00.000Z","2019-09-14T01:45:00.000Z","2019-09-14T02:00:00.000Z","2019-09-14T02:15:00.000Z","2019-09-14T02:30:00.000Z","2019-09-14T02:45:00.000Z","2019-09-14T03:00:00.000Z","2019-09-14T03:15:00.000Z","2019-09-14T03:30:00.000Z","2019-09-14T03:45:00.000Z","2019-09-14T04:00:00.000Z","2019-09-14T04:15:00.000Z","2019-09-14T04:30:00.000Z","2019-09-14T04:45:00.000Z","2019-09-14T05:00:00.000Z","2019-09-14T05:15:00.000Z","2019-09-14T05:30:00.000Z","2019-09-14T05:45:00.000Z","2019-09-14T06:00:00.000Z","2019-09-14T06:15:00.000Z","2019-09-14T06:30:00.000Z","2019-09-14T06:45:00.000Z","2019-09-14T07:00:00.000Z","2019-09-14T07:15:00.000Z","2019-09-14T07:30:00.000Z","2019-09-14T07:45:00.000Z","2019-09-14T08:00:00.000Z","2019-09-14T08:15:00.000Z","2019-09-14T08:30:00.000Z","2019-09-14T08:45:00.000Z","2019-09-14T09:00:00.000Z","2019-09-14T09:15:00.000Z","2019-09-14T09:30:00.000Z","2019-09-14T09:45:00.000Z","2019-09-14T10:00:00.000Z","2019-09-14T10:15:00.000Z","2019-09-14T10:30:00.000Z","2019-09-14T10:45:00.000Z","2019-09-14T11:00:00.000Z","2019-09-14T11:15:00.000Z","2019-09-14T11:30:00.000Z","2019-09-14T11:45:00.000Z","2019-09-14T12:00:00.000Z","2019-09-14T12:15:00.000Z","2019-09-14T12:30:00.000Z","2019-09-14T12:45:00.000Z","2019-09-14T13:00:00.000Z","2019-09-14T13:15:00.000Z","2019-09-14T13:30:00.000Z","2019-09-14T13:45:00.000Z","2019-09-14T14:00:00.000Z","2019-09-14T14:15:00.000Z","2019-09-14T14:30:00.000Z","2019-09-14T14:45:00.000Z","2019-09-14T15:00:00.000Z","2019-09-14T15:15:00.000Z","2019-09-14T15:30:00.000Z","2019-09-14T15:45:00.000Z","2019-09-14T16:00:00.000Z","2019-09-14T16:15:00.000Z","2019-09-14T16:30:00.000Z","2019-09-14T16:45:00.000Z","2019-09-14T17:00:00.000Z","2019-09-14T17:15:00.000Z","2019-09-14T17:30:00.000Z","2019-09-14T17:45:00.000Z","2019-09-14T18:00:00.000Z","2019-09-14T18:15:00.000Z","2019-09-14T18:30:00.000Z","2019-09-14T18:45:00.000Z","2019-09-14T19:00:00.000Z","2019-09-14T19:15:00.000Z","2019-09-14T19:30:00.000Z","2019-09-14T19:45:00.000Z","2019-09-14T20:00:00.000Z","2019-09-14T20:15:00.000Z","2019-09-14T20:30:00.000Z","2019-09-14T20:45:00.000Z","2019-09-14T21:00:00.000Z","2019-09-14T21:15:00.000Z","2019-09-14T21:30:00.000Z","2019-09-14T21:45:00.000Z","2019-09-14T22:00:00.000Z","2019-09-14T22:15:00.000Z","2019-09-14T22:30:00.000Z","2019-09-14T22:45:00.000Z","2019-09-14T23:00:00.000Z","2019-09-14T23:15:00.000Z","2019-09-14T23:30:00.000Z","2019-09-14T23:45:00.000Z","2019-09-15T00:00:00.000Z","2019-09-15T00:15:00.000Z","2019-09-15T00:30:00.000Z","2019-09-15T00:45:00.000Z","2019-09-15T01:00:00.000Z","2019-09-15T01:15:00.000Z","2019-09-15T01:30:00.000Z","2019-09-15T01:45:00.000Z","2019-09-15T02:00:00.000Z","2019-09-15T02:15:00.000Z","2019-09-15T02:30:00.000Z","2019-09-15T02:45:00.000Z","2019-09-15T03:00:00.000Z","2019-09-15T03:15:00.000Z","2019-09-15T03:30:00.000Z","2019-09-15T03:45:00.000Z","2019-09-15T04:00:00.000Z","2019-09-15T04:15:00.000Z","2019-09-15T04:30:00.000Z","2019-09-15T04:45:00.000Z","2019-09-15T05:00:00.000Z","2019-09-15T05:15:00.000Z","2019-09-15T05:30:00.000Z","2019-09-15T05:45:00.000Z","2019-09-15T06:00:00.000Z","2019-09-15T06:15:00.000Z","2019-09-15T06:30:00.000Z","2019-09-15T06:45:00.000Z","2019-09-15T07:00:00.000Z","2019-09-15T07:15:00.000Z","2019-09-15T07:30:00.000Z","2019-09-15T07:45:00.000Z","2019-09-15T08:00:00.000Z","2019-09-15T08:15:00.000Z","2019-09-15T08:30:00.000Z","2019-09-15T08:45:00.000Z","2019-09-15T09:00:00.000Z","2019-09-15T09:15:00.000Z","2019-09-15T09:30:00.000Z","2019-09-15T09:45:00.000Z","2019-09-15T10:00:00.000Z","2019-09-15T10:15:00.000Z","2019-09-15T10:30:00.000Z","2019-09-15T10:45:00.000Z","2019-09-15T11:00:00.000Z","2019-09-15T11:15:00.000Z","2019-09-15T11:30:00.000Z","2019-09-15T11:45:00.000Z","2019-09-15T12:00:00.000Z","2019-09-15T12:15:00.000Z","2019-09-15T12:30:00.000Z","2019-09-15T12:45:00.000Z","2019-09-15T13:00:00.000Z","2019-09-15T13:15:00.000Z","2019-09-15T13:30:00.000Z","2019-09-15T13:45:00.000Z","2019-09-15T14:00:00.000Z","2019-09-15T14:15:00.000Z","2019-09-15T14:30:00.000Z","2019-09-15T14:45:00.000Z","2019-09-15T15:00:00.000Z","2019-09-15T15:15:00.000Z","2019-09-15T15:30:00.000Z","2019-09-15T15:45:00.000Z","2019-09-15T16:00:00.000Z","2019-09-15T16:15:00.000Z","2019-09-15T16:30:00.000Z","2019-09-15T16:45:00.000Z","2019-09-15T17:00:00.000Z","2019-09-15T17:15:00.000Z","2019-09-15T17:30:00.000Z","2019-09-15T17:45:00.000Z","2019-09-15T18:00:00.000Z","2019-09-15T18:15:00.000Z","2019-09-15T18:30:00.000Z","2019-09-15T18:45:00.000Z","2019-09-15T19:00:00.000Z","2019-09-15T19:15:00.000Z","2019-09-15T19:30:00.000Z","2019-09-15T19:45:00.000Z","2019-09-15T20:00:00.000Z","2019-09-15T20:15:00.000Z","2019-09-15T20:30:00.000Z","2019-09-15T20:45:00.000Z","2019-09-15T21:00:00.000Z","2019-09-15T21:15:00.000Z","2019-09-15T21:30:00.000Z","2019-09-15T21:45:00.000Z","2019-09-15T22:00:00.000Z"],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11,14.7,14.7,3.7,11,11,22,19.18,29.3,43.38,28.86,32.9,22.36,29.3,29.02,11.44,18.3,15.32,14.6,21.9,21.9,21.9,17.82,11.1,15.96,18.3,22,13.64,20.84,18.4,18.4,33.1,33.1,33.1,30.28,40.3,48.66,40.66,36.7,36.7,44,35.64,37.22,35.26,25.88,31.62,22.86,22,22,18.48,22,22,14.8,7.3,7.3,7.3,7.3,6.7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7.3,7.3,7.3,18.3,17.9,22,20.94,32.18,32.9,32.9,41.4,32.9,54.9,65.90000000000001,69.76000000000001,50.38,40.3,27.28,22,15.86,14.7,14.26,3.7,3.7,3.7,25.7,27.28,40.3,40.3,40.3,69.02,63.64,57.2,62.3,61.42,34.76,33,30.38,19.94,9.640000000000001,14.7,14.7,11.62,14.7,25.7,24.84,18.4,18.4,18.4,10.48,4.3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7.3,14.6,33.66,36.6,25.6,25.6,22.4,17.62,11.48,23.44,33.1,33.1,40.4,40.4,28.52,18.4,25.7,21.4,25.7,28.04,25.7,25.7,33.46,47.02,47.24,44.46,32.9,32.9,36.7,22.1,18.3,18.3,6.88,0,7.3,7.3,22,6.92,18.4,29.4,40.4,42.6,40.4,40.4,40.4,29.84,22.62,13.66,11,11,3.08,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14.7,26.84,22,44,41.7,40.4,45.94,35.38,22.62,24.22,18.4,22.74,17.6,19.64,16.44,14.7,14.7,14.7,6.78,14.7,14.7,14.7,36.6,51.3,51.3,58.02,42.94,40.74,34.44,33,24.64,29.3,20.5,16.56,18.3,10.98,8.92,6.42,3.7,11,18.3,22,29.3,29.3,25.5,18.86,14.6,21.9,18.4,14.6,10.2,7.3,7.3,7.3,2.32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,14.7,12.06,14.7,33,33,44,62.3,80.59999999999999,98.90000000000001,91.42,50.24,41.26,48.3,41.78,46.44,66,95.3,102.78,75.68000000000001,77.09999999999999,72.95999999999999,51.84,62.4,62.96,62.4,90.22,66.36,73.40000000000001,78.18000000000001,88,108.5,95.12,86.72,71.64,53.32,46.4,25.8,17.9,11,11,22,16.74,14.7,14.7,14.7,3.7,1.46,0,0,0,0,7.3,7.3,7.3,7.3,1.76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,22,33,63.54,59.76,38.82,34.68,29.4,55.1,55.1,66.09999999999999,77.09999999999999,80.88,63.14,46.24,73.8,68.2,70.66,55.08,58.6,83.31999999999999,81.22,83.04000000000001,68.08,61.16,69.98,67.02,66,80.59999999999999,70.92,67.09999999999999,49.08,36.6,31.04,44.34],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11,22,22,66,97.23999999999999,165.88,195.36,267.96,439.56,553.08,652.52,743.16,699.6,610.72,536.36,453.2,331.32,284.68,257.84,241.12,217.8,201.08,149.16,124.96,119.68,93.28,66,51.92,35.64,33,24.64,11,6.16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11,11,11,66,96.8,98.56,117.48,170.28,220,386.76,498.96,683.76,777.48,722.04,622.16,533.72,448.36,383.68,333.96,300.08,288.64,234.52,199.76,191.84,160.6,121.44,94.59999999999999,69.52,65.56,34.76,16.28,11,7.48,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11,11,11,11,7.92,11,55,99,154,213.4,284.24,355.52,512.6,715.4400000000001,742.28,672.3200000000001,643.28,521.84,449.24,373.56,309.76,275,229.24,238.04,214.28,143.44,124.96,113.08,81.84,52.8,44,40.92,33,22,14.52,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11,44,110,188.76,223.96,250.8,350.24,459.8,568.04,680.6799999999999,653.84,581.6799999999999,582.12,555.72,407.44,344.96,306.68,270.16,248.6,218.24,179.52,151.8,117.48,89.76000000000001,35.64,22,7.92,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],"fixedtz":true,"tzone":"America/Los_Angeles","css":"/* Dygraph styling */\n\n.dygraph-title {\n  text-align: left;\n  font-weight: normal;\n  font-size: 70%;\n}\n\n.dygraph-legend {\n  color: white;\n  background-color: #BABABA !important;\n    padding-left:5px;\n  border-color:#BABABA;\n    border-style:solid;\n  border-width:thin;\n  transition:0s 4s;\n  z-index: 20 !important;\n  box-shadow: 2px 2px 5px rgba(0, 0, 0, .3);\n  border-radius: 3px;\n}\n\n.dygraph-legend:hover{\n  transform: translate(-110%);\n  transition: 0s;\n}\n\n.dygraph-legend > span {\n  color: black;\n  padding-left:5px;\n  margin-left:-5px;\n  background-color: white !important;\n  display: block;\n}\n\n.dygraph-legend > span > span{\n  display: inline;\n}\n\n.highlight {\n  border-left: 2px solid #BABABA;\n  padding-left:3px !important;\n\n}"},"evals":[],"jsHooks":[]}</script>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Marc Cañigueral.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
